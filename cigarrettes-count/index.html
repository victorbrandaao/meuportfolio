<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CigarroTrack - Controle Inteligente</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üö≠</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üö≠</text></svg>">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üö≠</div>
            <div class="loading-spinner"></div>
            <p>Carregando CigarroTrack...</p>
        </div>
    </div>

    <!-- App Container -->
    <div id="app" class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üö≠</span>
                    <h1 class="logo-text">CigarroTrack</h1>
                </div>
                <button class="settings-btn" id="settingsBtn" aria-label="Configura√ß√µes">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- User Tabs -->
        <div class="user-tabs">
            <button class="user-tab active" data-user="victor" id="victorTab">
                <div class="user-avatar">üë®üèª</div>
                <div class="user-info">
                    <span class="user-name">Victor</span>
                    <span class="user-count" id="victorCount">0 hoje</span>
                </div>
            </button>
            <button class="user-tab" data-user="kalyne" id="kalyneTab">
                <div class="user-avatar">üë©üèª</div>
                <div class="user-info">
                    <span class="user-name">Kalyne</span>
                    <span class="user-count" id="kalyneCount">0 hoje</span>
                </div>
            </button>
        </div>

        <!-- Main Content -->
        <main class="main">
            <!-- Today Stats -->
            <section class="today-stats">
                <div class="stat-card main-stat">
                    <div class="stat-header">
                        <span class="stat-icon">üö¨</span>
                        <span class="stat-label">Hoje</span>
                    </div>
                    <div class="stat-value" id="todayCount">0</div>
                    <div class="stat-subtitle">cigarros fumados</div>
                </div>
                
                <div class="stat-grid">
                    <div class="stat-card">
                        <span class="stat-icon">üì¶</span>
                        <div class="stat-info">
                            <span class="stat-value" id="stockCount">0</span>
                            <span class="stat-label">estoque</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üí∞</span>
                        <div class="stat-info">
                            <span class="stat-value" id="spentToday">R$ 0</span>
                            <span class="stat-label">gasto hoje</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Buttons -->
            <section class="actions">
                <button class="action-btn primary" id="smokeBtn">
                    <span class="action-icon">üö¨</span>
                    <span class="action-text">Fumar</span>
                </button>
                <button class="action-btn secondary" id="buyBtn">
                    <span class="action-icon">‚ûï</span>
                    <span class="action-text">Comprar</span>
                </button>
            </section>

            <!-- Quick Stats -->
            <section class="quick-stats">
                <div class="quick-stat">
                    <span class="quick-label">Esta semana</span>
                    <span class="quick-value" id="weekCount">0</span>
                </div>
                <div class="quick-stat">
                    <span class="quick-label">Este m√™s</span>
                    <span class="quick-value" id="monthCount">0</span>
                </div>
                <div class="quick-stat">
                    <span class="quick-label">Total gasto</span>
                    <span class="quick-value" id="totalSpent">R$ 0</span>
                </div>
            </section>

            <!-- Chart -->
            <section class="chart-section">
                <h3 class="section-title">√öltimos 7 dias</h3>
                <div class="chart-container">
                    <canvas id="weekChart"></canvas>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" id="historyBtn">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Hist√≥rico</span>
            </button>
            <button class="nav-btn" id="resetBtn">
                <span class="nav-icon">üîÑ</span>
                <span class="nav-label">Reset</span>
            </button>
            <button class="nav-btn" id="exportBtn">
                <span class="nav-icon">üì§</span>
                <span class="nav-label">Exportar</span>
            </button>
        </nav>
    </div>

    <!-- Modal de Compra -->
    <div id="buyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Comprar Cigarros</h3>
                <button class="modal-close" data-modal="buyModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="packCount">Quantidade de ma√ßos</label>
                    <input type="number" id="packCount" min="1" value="1">
                </div>
                <div class="input-group">
                    <label for="packPrice">Pre√ßo por ma√ßo (R$)</label>
                    <input type="number" id="packPrice" min="0" step="0.01" value="14.00">
                </div>
                <div class="modal-summary">
                    <span>Total: R$ <span id="buyTotal">14.00</span></span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" data-modal="buyModal">Cancelar</button>
                <button class="btn btn-primary" id="confirmBuy">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configura√ß√µes</h3>
                <button class="modal-close" data-modal="settingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="defaultPrice">Pre√ßo padr√£o do ma√ßo (R$)</label>
                    <input type="number" id="defaultPrice" min="0" step="0.01" value="14.00">
                </div>
                <div class="input-group">
                    <label for="cigarettesPerPack">Cigarros por ma√ßo</label>
                    <input type="number" id="cigarettesPerPack" min="1" value="20">
                </div>
                <div class="input-group">
                    <label for="dailyGoal">Meta di√°ria (cigarros)</label>
                    <input type="number" id="dailyGoal" min="0" value="10">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" data-modal="settingsModal">Cancelar</button>
                <button class="btn btn-primary" id="saveSettings">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirmModal" class="modal">
        <div class="modal-content confirm-modal">
            <div class="modal-header">
                <h3>Confirma√ß√£o</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Tem certeza que deseja continuar?</p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="confirmCancel">Cancelar</button>
                <button class="btn btn-danger" id="confirmYes">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>

        </section>

        <!-- Statistics Overview -->
        <section class="stats-overview">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-header">
                <span class="stat-icon">üìä</span>
                <span class="stat-title">Total Gasto</span>
              </div>
              <div class="stat-value danger" id="totalSpent">R$ 0,00</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <span class="stat-icon">üì¶</span>
                <span class="stat-title">Carteiras</span>
              </div>
              <div class="stat-value" id="totalPacks">0</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <span class="stat-icon">üìà</span>
                <span class="stat-title">M√©dia/Dia</span>
              </div>
              <div class="stat-value" id="avgPerDay">0</div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <span class="stat-icon">‚è±Ô∏è</span>
                <span class="stat-title">Dias</span>
              </div>
              <div class="stat-value" id="totalDays">0</div>
            </div>
          </div>
        </section>

        <!-- Weekly Chart -->
        <section class="chart-section">
          <div class="chart-card">
            <div class="chart-header">
              <h3>üìà Consumo Semanal</h3>
              <button class="chart-toggle" id="chartToggle">üìä</button>
            </div>
            <div class="chart-container">
              <canvas id="weeklyChart"></canvas>
            </div>
          </div>
        </section>

        <!-- Footer Actions -->
        <section class="footer-actions">
          <button class="footer-btn" id="historyBtn">
            <span>üìã</span> Hist√≥rico
          </button>
          <button class="footer-btn" id="resetBtn">
            <span>üîÑ</span> Reset
          </button>
          <button class="footer-btn" id="exportBtn">
            <span>üì§</span> Exportar
          </button>
        </section>
      </main>
    </div>

    <!-- Modals -->

    <!-- Add Cigarettes Modal -->
    <div id="addCigarettesModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>‚ûï Adicionar Cigarros</h3>
          <button class="close-btn" data-modal="addCigarettesModal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <label for="cigaretteCount">Quantidade de cigarros:</label>
            <div class="counter-input">
              <button class="counter-btn" id="decreaseCount">-</button>
              <input
                type="number"
                id="cigaretteCount"
                value="20"
                min="1"
                max="200"
              />
              <button class="counter-btn" id="increaseCount">+</button>
            </div>
          </div>
          <div class="input-group">
            <label for="cigaretteCost">Valor total pago:</label>
            <div class="money-input">
              <span class="currency">R$</span>
              <input
                type="number"
                id="cigaretteCost"
                value="14.00"
                step="0.01"
                min="0"
              />
            </div>
          </div>
          <div class="modal-actions">
            <button class="modal-btn cancel" data-modal="addCigarettesModal">
              Cancelar
            </button>
            <button class="modal-btn confirm" id="confirmAddCigarettes">
              Adicionar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>‚öôÔ∏è Configura√ß√µes</h3>
          <button class="close-btn" data-modal="settingsModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="setting-group">
            <label for="packPrice">Pre√ßo da carteira (R$):</label>
            <input type="number" id="packPrice" step="0.01" min="0" />
          </div>
          <div class="setting-group">
            <label for="packSize">Cigarros por carteira:</label>
            <input type="number" id="packSize" min="1" max="50" />
          </div>
          <div class="modal-actions">
            <button class="modal-btn cancel" data-modal="settingsModal">
              Cancelar
            </button>
            <button class="modal-btn confirm" id="saveSettings">Salvar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
      <div class="modal-content wide">
        <div class="modal-header">
          <h3>üìã Hist√≥rico Detalhado</h3>
          <button class="close-btn" data-modal="historyModal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="historyContent">
            <!-- History content will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
      <div class="modal-content confirm-modal">
        <div class="modal-header">
          <h3>‚ö†Ô∏è Confirma√ß√£o</h3>
        </div>
        <div class="modal-body">
          <p id="confirmMessage">Tem certeza que deseja continuar?</p>
          <div class="modal-actions">
            <button class="modal-btn cancel" id="confirmCancel">
              Cancelar
            </button>
            <button class="modal-btn confirm danger" id="confirmYes">
              Confirmar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Floating Action Button -->
    <button class="fab" id="quickSmokeBtn" title="Fumar r√°pido">üö¨</button>

    <script src="script.js"></script>
  </body>
</html>
